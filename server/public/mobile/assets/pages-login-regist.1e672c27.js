import{H as e,r as a,a as l,c as o,w as t,n as s,i as u,d as i,e as n,t as d,C as c,z as r,h as p,j as m}from"./index-24f85b57.js";import{u as f,c as v,s as h,_,a as y,b as g,d as w}from"./checkUtil.6220f3f4.js";import{_ as V}from"./u-button.ee69f298.js";import{i as b}from"./indexApi.97976835.js";import{l as x}from"./loginApi.7c630f1b.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.86e87a54.js";const $=j({__name:"regist",setup(j){e({title:""});const $=a({code:"",mobile:"",account:"",password:"",againPwd:""}),k=a(""),z=a(),E=e=>{k.value=e},{loading:C,methodAPI:P}=f(x.register);return(e,a)=>{const f=u,x=p(m("u-input"),_),j=p(m("u-form-item"),y),U=p(m("u-verification-code"),g),A=p(m("u-button"),V),I=p(m("u-form"),w);return l(),o(f,{class:s(e.themeName)},{default:t((()=>[i(f,{class:"layout-regist-widget"},{default:t((()=>[i(f,{class:"head"},{default:t((()=>[i(f,{class:"backdrop"}),i(f,{class:"title"},{default:t((()=>[n("注册账号")])),_:1})])),_:1}),i(f,{class:"form"},{default:t((()=>[i(I,{ref:"uForm",model:$.value},{default:t((()=>[i(j,{"left-icon":"account","left-icon-style":{color:"#999999","font-size":"36rpx"}},{default:t((()=>[i(x,{modelValue:$.value.account,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value.account=e),type:"text",placeholder:"请输入登录账号"},null,8,["modelValue"])])),_:1}),i(j,{"left-icon":"fingerprint","left-icon-style":{color:"#999999","font-size":"36rpx"}},{default:t((()=>[i(x,{modelValue:$.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>$.value.password=e),type:"password",placeholder:"请输入登录密码"},null,8,["modelValue"])])),_:1}),i(j,{"left-icon":"fingerprint","left-icon-style":{color:"#999999","font-size":"36rpx"}},{default:t((()=>[i(x,{modelValue:$.value.againPwd,"onUpdate:modelValue":a[2]||(a[2]=e=>$.value.againPwd=e),type:"password",placeholder:"请再次确认密码"},null,8,["modelValue"])])),_:1}),i(j,{"left-icon":"phone","left-icon-style":{color:"#999999","font-size":"36rpx"}},{default:t((()=>[i(x,{modelValue:$.value.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>$.value.mobile=e),type:"number",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),i(j,{"left-icon":"lock","left-icon-style":{color:"#999999","font-size":"36rpx"}},{right:t((()=>[i(U,{ref_key:"uCodeRef",ref:z,seconds:"60",onChange:E},null,512),i(A,{plain:!0,type:"theme","hover-class":"none",size:"mini",shape:"circle",onClick:a[5]||(a[5]=e=>(async()=>{var e;return v.isEmpty($.value.mobile)?uni.$u.toast("请输入手机号"):v.isMobile($.value.mobile)?void((null==(e=z.value)?void 0:e.canGetCode)&&await b.sendSms({scene:h.REGISTER,mobile:$.value.mobile}).then((()=>{var e;null==(e=z.value)||e.start()})).catch((()=>{}))):uni.$u.toast("非法的手机号")})())},{default:t((()=>[n(d(k.value),1)])),_:1})])),default:t((()=>[i(x,{modelValue:$.value.code,"onUpdate:modelValue":a[4]||(a[4]=e=>$.value.code=e),type:"number",placeholder:"请输入验证码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),i(f,{class:"pt-40"},{default:t((()=>[i(A,{loading:c(C),type:"theme",shape:"circle",onClick:a[6]||(a[6]=e=>(async()=>v.isEmpty($.value.account)?uni.$u.toast("请输登录账号"):v.isEmpty($.value.password)?uni.$u.toast("请输登录密码"):v.isEmpty($.value.againPwd)?uni.$u.toast("请输确认密码"):v.isEmpty($.value.code)?uni.$u.toast("请输入验证码"):$.value.password!==$.value.againPwd?uni.$u.toast("两次密码不一致"):void(await P($.value).then((()=>{uni.$u.toast("注册成功"),r()})).catch((()=>{}))))())},{default:t((()=>[n("注册账号")])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-a98c1295"]]);export{$ as default};
