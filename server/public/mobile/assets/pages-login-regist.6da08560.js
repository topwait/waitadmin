import{s as e,r as a,a as l,c as o,w as t,n as s,i as u,d as i,e as n,t as d,G as c,v as r,B as p,h as m,j as f}from"./index-3b9d42cb.js";import{u as v,c as h,s as _,_ as y,a as g,b as w,d as V}from"./checkUtil.fbff69cc.js";import{_ as b}from"./u-button.c21af1fa.js";import{i as x}from"./indexApi.97976835.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.a9920561.js";const $=j({__name:"regist",setup(j){e({title:""});const $=a({code:"",mobile:"",account:"",password:"",againPwd:""}),E=a(""),k=a(),z=e=>{E.value=e},{loading:P,methodAPI:U}=v(r.register);return(e,a)=>{const r=u,v=m(f("u-input"),y),j=m(f("u-form-item"),g),C=m(f("u-verification-code"),w),G=m(f("u-button"),b),I=m(f("u-form"),V);return l(),o(r,{class:s(e.themeName)},{default:t((()=>[i(r,{class:"layout-regist-widget"},{default:t((()=>[i(r,{class:"head"},{default:t((()=>[i(r,{class:"backdrop"}),i(r,{class:"title"},{default:t((()=>[n("注册账号")])),_:1})])),_:1}),i(r,{class:"form"},{default:t((()=>[i(I,{ref:"uForm",model:$.value},{default:t((()=>[i(j,{"left-icon":"account","left-icon-style":{color:"#999999","font-size":"36rpx"}},{default:t((()=>[i(v,{modelValue:$.value.account,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value.account=e),type:"text",placeholder:"请输入登录账号"},null,8,["modelValue"])])),_:1}),i(j,{"left-icon":"fingerprint","left-icon-style":{color:"#999999","font-size":"36rpx"}},{default:t((()=>[i(v,{modelValue:$.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>$.value.password=e),type:"password",placeholder:"请输入登录密码"},null,8,["modelValue"])])),_:1}),i(j,{"left-icon":"fingerprint","left-icon-style":{color:"#999999","font-size":"36rpx"}},{default:t((()=>[i(v,{modelValue:$.value.againPwd,"onUpdate:modelValue":a[2]||(a[2]=e=>$.value.againPwd=e),type:"password",placeholder:"请再次确认密码"},null,8,["modelValue"])])),_:1}),i(j,{"left-icon":"phone","left-icon-style":{color:"#999999","font-size":"36rpx"}},{default:t((()=>[i(v,{modelValue:$.value.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>$.value.mobile=e),type:"number",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),i(j,{"left-icon":"lock","left-icon-style":{color:"#999999","font-size":"36rpx"}},{right:t((()=>[i(C,{ref_key:"uCodeRef",ref:k,seconds:"60",onChange:z},null,512),i(G,{plain:!0,type:"theme","hover-class":"none",size:"mini",shape:"circle",onClick:a[5]||(a[5]=e=>(async()=>{var e;return h.isEmpty($.value.mobile)?uni.$u.toast("请输入手机号"):h.isMobile($.value.mobile)?void((null==(e=k.value)?void 0:e.canGetCode)&&await x.sendSms({scene:_.REGISTER,mobile:$.value.mobile}).then((()=>{var e;null==(e=k.value)||e.start()})).catch((()=>{}))):uni.$u.toast("非法的手机号")})())},{default:t((()=>[n(d(E.value),1)])),_:1})])),default:t((()=>[i(v,{modelValue:$.value.code,"onUpdate:modelValue":a[4]||(a[4]=e=>$.value.code=e),type:"number",placeholder:"请输入验证码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),i(r,{class:"pt-40"},{default:t((()=>[i(G,{loading:c(P),type:"theme",shape:"circle",onClick:a[6]||(a[6]=e=>(async()=>h.isEmpty($.value.account)?uni.$u.toast("请输登录账号"):h.isEmpty($.value.password)?uni.$u.toast("请输登录密码"):h.isEmpty($.value.againPwd)?uni.$u.toast("请输确认密码"):h.isEmpty($.value.code)?uni.$u.toast("请输入验证码"):$.value.password!==$.value.againPwd?uni.$u.toast("两次密码不一致"):void(await U($.value).then((()=>{uni.$u.toast("注册成功"),p()})).catch((()=>{}))))())},{default:t((()=>[n("注册账号")])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-a98c1295"]]);export{$ as default};
